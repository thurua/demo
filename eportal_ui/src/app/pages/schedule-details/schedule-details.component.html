<div class="card header-margin">
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group row">
                    <div class="col-md-4">
                        <strong>Schedule of Offer</strong>
                    </div>
                    <div class="col-md-8">
                        <label class="col-form-label">{{entity.scheduleNo}}</label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <strong>Client</strong>
                    </div>
                    <div class="col-md-8">
                        <label class="col-form-label">{{entity.clientName}}</label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <strong>Client Account</strong>
                    </div>
                    <div class="col-md-8">
                        <label class="col-form-label">{{entity.clientAccount}}</label>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group row">
                    <div class="col-md-4">

                    </div>
                    <div class="col-md-8">

                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <strong>Status</strong>
                    </div>
                    <div class="col-md-8">
                        <label class="col-form-label">{{entity.portalStatus}}</label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <strong>Schedule Date</strong>
                    </div>
                    <div class="col-md-8">
                        <label class="col-form-label">{{entity.scheduleDate | date: 'dd-MMM-yyyy'}}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card header-margin">
    <div class="card-body">
        <tabset class="nav-justified">
            <tab heading="Schedule">
                <form enctype="multipart/form-data" class="form-horizontal" novalidate #frm="ngForm" (ngSubmit)="UpdateSchedule(frm.valid)"
                    *ngIf="entity">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <strong>Schedule of Offer</strong>
                                    </div>
                                    <div class="col-md-8" *ngIf="entity.portalStatus == 'Reversed'">
                                        <label class="col-form-label">{{entity.scheduleNo}}</label>
                                    </div>
                                    <div class="col-md-8" *ngIf="entity.portalStatus != 'Reversed'">
                                        <input type="text" name="scheduleNo" #scheduleNo="ngModel" [(ngModel)]="entity.scheduleNo"
                                            value="{{entity.scheduleNo}}" class="form-control">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <strong>Total No. of {{(entity.isCreditNote) ? "Credit Notes":'Invoice' }}</strong>
                                    </div>
                                    <div class="col-md-8">
                                        <label class="col-form-label">{{(entity.isCreditNote) ? entity.totalCn
                                            :entity.total}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <strong>Total Amount of {{(entity.isCreditNote) ? "Credit Notes":'Invoice' }}</strong>
                                    </div>
                                    <div class="col-md-8">
                                        <label class="col-form-label"> {{entity.currencyIsoCode}}
                                            {{(entity.isCreditNote) ? entity.totalAmountCn :entity.totalAmount |
                                            number: '0.2'}}</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <strong>Document Type</strong>
                                    </div>
                                    <div class="col-md-8">
                                        <label class="col-form-label">{{entity.documentType}}</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <strong>Exchange Rate</strong>
                                    </div>
                                    <div class="col-md-8">
                                        <label class="col-form-label">{{entity.exchangeRate | number: '0.2'}}</label>
                                    </div>
                                </div>
                                <div class="form-group row" [hidden]="entity.documentType=='Cash Disbursement'">
                                    <div class="col-md-4">
                                        <strong>Factor Code</strong>
                                    </div>
                                    <div class="col-md-8">
                                        <label class="col-form-label">{{entity.factorCode}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="entity.portalStatus=='Pending Authorisation' && checkAuhorise== true">
                            <div class="col-md-2">
                                <button class="btn btn-gray btn-block" type="button" routerLink="../../schedule">Cancel</button>
                            </div>
                            <div class="col-md-2 cancel">
                                <button class="btn btn-primary btn-block" type="submit">Save</button>

                            </div>
                            <div class="col-md-6"></div>
                        </div>
                    </div>
                </form>
            </tab>
            <tab heading="Invoice Listing" *ngIf="checkIv">
                <div class="card header-margin">
                    <div class="card-header">
                        <strong [hidden]="entity.documentType=='Cash Disbursement'">Invoice Listing</strong>
                        <strong [hidden]="entity.documentType=='Invoice'">Cash Disbursment</strong>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div widget class="card border-0 box-shadow">
                                <div class="card-body pt-0 widget-body">
                                    <div class="table-responsive">
                                        <ng2-smart-table class="table table-hover" [settings]="settingsIv" [source]="ivList"></ng2-smart-table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body col-md-6" *ngIf="entity.portalStatus=='Pending Authorisation' && checkAuhorise == true">
                    <div class="row">
                        <div class="col-md-2"></div>
                        <div class="col-md-4" *ngIf="checkDiscard == true">
                            <button class="btn btn-primary btn-block" type="button" (click)="discardModal.show();">Discard</button></div>
                        <div class="col-md-4">
                            <button class="btn btn-primary btn-block" type="button" (click)="authorsiedModal.show();">Authorise</button>
                        </div>
                        <div class="col-md-2">
                        </div>
                    </div>
                </div>
            </tab>
            <tab heading="Credit Note Listing" *ngIf="checkCd">
                <div class="card header-margin">
                    <div class="card-header">
                        <strong>Credit Note Listing</strong>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div widget class="card border-0 box-shadow">
                                <div class="card-body pt-0 widget-body">
                                    <div class="table-responsive">
                                        <ng2-smart-table class="table table-hover" [settings]="settings" [source]="cnList"></ng2-smart-table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body col-md-6" *ngIf="entity.portalStatus=='Pending Authorisation'">
                    <div class="row">
                        <div class="col-md-2"></div>
                        <div class="col-md-4" *ngIf="checkDiscard == true">
                            <button class="btn btn-primary btn-block" type="button" (click)="discardModal.show();">Discard</button></div>
                        <div class="col-md-4">
                            <button class="btn btn-primary btn-block" type="button" (click)="authorsiedModal.show();">Authorsie</button>
                        </div>
                        <div class="col-md-2">
                        </div>
                    </div>
                </div>
            </tab>
            <tab heading="Attachments" *ngIf="checkAtt">
                <div class="row">
                    <div class="card-body col-md-6">
                        <div class="form-group row">
                            <div class="col-md-8">
                                <div class="input-group file-upload">
                                    <input type="file" ngFileSelect [options]="options" (uploadOutput)="onUploadOutput($event)"
                                        [uploadInput]="uploadInput" accept=".pdf,.tiff,.jpeg,.gif,.png" multiple class="file-upload-btn">
                                    <input type="text" class="form-control" placeholder="Choose file...">
                                    <!-- <i class="fa fa-times delete-file" (click)="removeAllFiles()" *ngIf="file"></i> -->
                                    <span class="input-group-append upload">
                                        <button class="btn btn-primary" type="button"><i class="fa fa-upload"> </i></button>
                                    </span>
                                </div>
                                <ul class="k-upload-files k-reset">
                                    <li class="k-file k-file-success" *ngFor="let i of files">
                                        <div>
                                            <span class="k-icon k-i-jpg"></span>
                                            <i class="fa fa-times delete-file k-upload-action k-button" (click)="removeFile(i.fileIndex)"
                                                style="float: right;display: block;margin-top: 12px;"></i>
                                            <a>
                                                {{i.name}}
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">

                            </div>
                        </div>

                    </div>
                    <div class="card-body col-md-6">
                        <div class="row">
                            <div class="col-md-6"></div>
                            <div class="col-md-4">
                                <button class="btn btn-primary btn-block" type="button" (click)="startUpload()">Upload</button>
                            </div>
                            <div class="col-md-2">
                            </div>
                        </div>
                    </div>
                    <div class="card col-md-12">
                        <div class="card-body">
                            <div widget class="card border-0 box-shadow">
                                <div class="card-body pt-0 widget-body">
                                    <div class="table-responsive">
                                        <ng2-smart-table class="table table-hover" [settings]="settingsAtt" [source]="attList"
                                            (deleteConfirm)="onDelete($event)" (custom)="onDownload($event)"></ng2-smart-table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
        </tabset>
    </div>
</div>

<div bsModal #authorsiedModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Confirm Authorsie</h4>
                <button type="button" class="close" (click)="authorsiedModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body size-text-content-modal text-center">
                <!-- <div class="form-group row">
                    <div class="col-md-12">
                        <i class="fa fa-check-circle-o icon-check-square"></i>
                    </div>
                </div> -->
                <div class="form-group row">
                    <div class="col-md-12 text-bold">
                        <span>Are you sure, you want to proceed?</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-1">
                </div>
                <div class="col-md-10 row">
                    <div class="col-md-6">
                        <button type="button" class="btn btn-block" (click)="authorsiedModal.hide();">No</button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn btn-primary btn-block" (click)="Authorise();authorsiedModal.hide();">Yes</button>
                    </div>
                </div>
                <div class="col-md-1">
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div bsModal #uploadModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Error</h4>
                <button type="button" class="close" (click)="authorsiedModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body size-text-content-modal text-center">
                <!-- <div class="form-group row">
                    <div class="col-md-12">
                        <i class="fa fa-check-circle-o icon-check-square"></i>
                    </div>
                </div> -->
                <div class="form-group row">
                    <div class="col-md-12 text-bold">
                        <span>{{mesErr}}</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-1">
                </div>
                <div class="col-md-10 row">
                    <button type="button" class="btn btn-primary btn-block" (click)="uploadModal.hide();">OK</button>
                </div>
                <div class="col-md-1">
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div bsModal #infoModal="bs-modal" [config]="{backdrop: 'static'}" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>{{title}}</h4>
                <button type="button" class="close" (click)="infoModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body size-text-content-modal text-center">
                <div class="form-group row">
                    <div class="col-md-12">
                        <i class="fa fa-check-circle-o icon-check-square"></i>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-12 text-bold">
                        <span>{{msgInfo}}</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-1">
                </div>
                <div class="col-md-10">
                    <button type="button" class="btn btn-success btn-block text-bold" routerLink="/pages/schedule">OK</button>
                </div>
                <div class="col-md-1">
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div bsModal #discardModal="bs-modal" [config]="{backdrop: 'static'}" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Confirm Authorsie</h4>
                <button type="button" class="close" (click)="discardModal.hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body size-text-content-modal text-center">
                <!-- <div class="form-group row">
                        <div class="col-md-12">
                            <i class="fa fa-check-circle-o icon-check-square"></i>
                        </div>
                    </div> -->
                <div class="form-group row">
                    <div class="col-md-12 text-bold">
                        <span>Are you sure you want to discard?</span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-1">
                </div>
                <div class="col-md-10 row">
                    <div class="col-md-6">
                        <button type="button" class="btn btn-block" (click)="discardModal.hide();">No</button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn btn-primary btn-block" (click)="Discard();">Yes</button>
                    </div>
                </div>
                <div class="col-md-1">
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>